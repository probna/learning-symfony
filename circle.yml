machine:
  php:
    version: 7.1.3
general:
  artifacts:
    - "build/"
    - "tmp/"
    - "var/logs"
dependencies:
  pre:
    - cp etc/circleci/parameters.yml app/config/parameters.yml
  override:
    - composer install --no-interaction
  post:
    - php bin/console doctrine:database:create --env=test
    - php bin/console doctrine:schema:create --env=test
    - php bin/console doctrine:fixtures:load --env=test --no-interaction
  cache_directories:
    - "vendor"
    - "bin"
test:
  override:
    - ./vendor/bin/behat
    - ./vendor/bin/php-cs-fixer fix --dry-run --diff
    
